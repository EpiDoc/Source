<?xml version="1.0" encoding="UTF-8"?>
<!--+
    | eAla Sample Application Sitemap
    +-->
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">
<!-- =========================== Components ================================ -->
  <map:components>
   <map:generators default="file"/>
   <map:transformers default="xslt"/>
   <map:readers default="resource"/>
   <map:serializers default="html"/>
   <map:matchers default="wildcard"/>
   <map:selectors default="browser"/>
  </map:components>
  
<!-- =========================== Pipelines ================================= -->
 <map:pipelines>
  <map:pipeline>
  
   <map:match pattern="">
     <map:generate type="xpathdirectory" src="src/{1}">
     	<map:parameter name="xpath" value="//TEI.2/@id|//titleStmt/title" />
     </map:generate>
     <map:transform type="xslt" src="xslt/index.xsl">
     </map:transform>
     <map:serialize/>
   </map:match>
   <map:match pattern="index.html">
     <map:generate type="xpathdirectory" src="src/{1}">
     	<map:parameter name="xpath" value="//TEI.2/@id|//titleStmt/title" />
     </map:generate>
     <map:transform type="xslt" src="xslt/index.xsl">
     </map:transform>
     <map:serialize/>
   </map:match>
   <map:match pattern="persName.html">
     <map:generate type="xpathdirectory" src="src/">
     	<map:parameter name="xpath" value="//TEI.2/@id|//div[@type='edition']//persName" />
     </map:generate>
     <map:transform type="xslt" src="xslt/pers_a.xsl">
     </map:transform>
     <map:transform type="xslt" src="xslt/pers_b.xsl">
     </map:transform>
     <map:transform type="xslt" src="xslt/persName.xsl">
     </map:transform>
     <map:serialize />
   </map:match>
   <map:match pattern="placeName.html">
     <map:generate type="xpathdirectory" src="src/">
     	<map:parameter name="xpath" value="//TEI.2/@id|//div[@type='edition']//placeName" />
     </map:generate>
     <map:transform type="xslt" src="xslt/place_a.xsl">
     </map:transform>
     <map:transform type="xslt" src="xslt/place_b.xsl">
     </map:transform>
     <map:transform type="xslt" src="xslt/placeName.xsl">
     </map:transform>
     <map:serialize />
   </map:match>
   <map:match pattern="numerals.html">
     <map:generate type="xpathdirectory" src="src/">
     	<map:parameter name="xpath" value="//TEI.2/@id|//div[@type='edition']//num" />
     </map:generate>
     <map:transform type="xslt" src="xslt/numerals.xsl">
     </map:transform>
     <map:serialize />
   </map:match>
   <map:match pattern="*.html">
     <map:generate src="src/{1}.xml"/>
     <map:transform type="xslt" src="xslt/epidoc.xsl">
     </map:transform>
     <map:serialize/>
   </map:match>
 	 <!-- +++++++++++ XML directories +++++++++++ -->
  <map:match pattern="dir.xml">
     <map:generate type="xpathdirectory" src="src/{1}">
     	<map:parameter name="xpath" value="//TEI.2/@id|//titleStmt/title" />
     </map:generate>
     <map:serialize type="xml"/>
   </map:match>
  <map:match pattern="num.xml">
     <map:generate type="xpathdirectory" src="src/">
     	<map:parameter name="xpath" value="//TEI.2/@id|//div[@type='edition']//num" />
     </map:generate>
     <map:serialize type="xml"/>
   </map:match>
   <map:match pattern="pers_a.xml">
     <map:generate type="xpathdirectory" src="src/{1}">
     	<map:parameter name="xpath" value="//TEI.2/@id|//titleStmt/title|//div[@type='edition']//persName" />
     </map:generate>
     <map:transform type="xslt" src="xslt/pers_a.xsl">
     </map:transform>
     <map:serialize type="xml"/>
   </map:match>
   <map:match pattern="pers_b.xml">
     <map:generate type="xpathdirectory" src="src/{1}">
     	<map:parameter name="xpath" value="//TEI.2/@id|//titleStmt/title|//div[@type='edition']//persName" />
     </map:generate>
     <map:transform type="xslt" src="xslt/pers_a.xsl">
     </map:transform>
     <map:transform type="xslt" src="xslt/pers_b.xsl">
     </map:transform>
     <map:serialize type="xml"/>
   </map:match>
   
   <!-- css stylesheets -->
      <map:match pattern="**.css">
        <map:read src="{1}.css" mime-type="text/css"/>
      </map:match>
      <map:match pattern="**.htm">
        <map:read src="{1}.htm" mime-type="text/htm"/>
      </map:match>
      <map:match pattern="**.js">
        <map:read src="{1}.js" mime-type="text/javascript"/>
      </map:match>
      <!-- images -->		
      <map:match pattern="**.gif">
		   	<map:read src="{1}.gif" mime-type="image/gif"/>
		  </map:match>
		
		  <map:match pattern="**.jpg">
		    <map:read src="{1}.jpg" mime-type="image/jpg"/>
		  </map:match>
   
   <!-- ======================== Automount =============================== -->
   <map:match pattern="*/**">
     <map:mount check-reload="yes" src="{1}/" uri-prefix="{1}"/>
   </map:match>
  </map:pipeline>
</map:pipelines>
</map:sitemap>
